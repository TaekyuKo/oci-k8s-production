---
# Sealed Secrets 설치 (암호화된 시크릿 관리)

- name: Install Sealed Secrets
  hosts: k8s_master[0]
  become: yes
  roles:
    - sealed-secrets
  
  post_tasks:
    - name: Verify Sealed Secrets controller
      shell: kubectl get pods -n kube-system -l name=sealed-secrets-controller
      become_user: ubuntu
      register: sealed_secrets_status
      changed_when: false
      
    - name: Display Sealed Secrets status
      debug:
        msg: "{{ sealed_secrets_status.stdout_lines }}"
